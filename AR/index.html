<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <!-- making the website conform to any device -->
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">


  <title>VAQIIS AR demo</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" type="text/css" href="./stylesheets/style.css">

  <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
  <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
  <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  <!-- D3 -->
  <script src="https://d3js.org/d3.v5.min.js"></script>


  <script>
  THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
  </script>


  <!-- Add icon library -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- jsnlog -->
  <script src="jsnlog.min.js"> </script>


  <script src="components.js"></script>
  <script src="visualizeData.js"></script>
  <script src="../shared/parseData.js"></script>
  <script src="readData.js"></script>


  <!-- creating the consoleAppender to write logs into the console
  also see http://js.jsnlog.com/ -->
  <jsnlog>
    <consoleAppender name="consoleAppender" ></consoleAppender>
    <logger name ="mylogger" appenders="consoleAppender"></logger>
  </jsnlog>
</head>


<body style='margin: 0; overflow: hidden; font-family: Helvetica, Verdana, Times, serif; font-size: 1.3em;' id="visArea"
onload="introduction(1);">

  <a-scene
  vr-mode-ui="enabled: false"
  embedded
  arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'
  cursor="rayOrigin: mouse; fuse: true; fuseTimeout: 0;"
  raycaster="objects: [gps-entity-place];"
  inspector
  keyboard-shortcuts
  screenshot
  device-orientation-permission-ui>
  <a-camera gps-camera="minDistance: 20;" rotation-reader id="camera" camera-listener id="camera">
    <a-entity id="arrow" style="visibility: hidden" arrow="direction: 0 1 0; length: 0.7; headWidth: 0.2; color: #4CAF50;" position="0 -1.5 -2.7"></a-entity>
  </a-camera>
</a-scene>

<div class="centered">
  <div id="distance" style="visibility: hidden"></div>
</div>

<div class="top-right" id="guide-buttons">
</div>

  <div class="right" style="visibility: hidden" id="gaugeContainer">
    <div style="text-align:center; font-size: 12px; background-color: #555; color: white; padding: 0.1em;">PM10 (ppm)</div>
    <canvas id="gauge" width="30" height="300" style="margin-right: 0px;"></canvas>
  </div>

<div class="top-left">

    <button onclick=showAndHideInformation() id="iconBarBtn"><i class="fa fa-question-circle"></i></button>
     <a href="../" class="active" id="iconBarBtn"><i class="fa fa-globe"></i></a>


</div>

<div class="information" id="information" style="display: none;">
  <div id = "settings">
  <h3>Air quality in Münster (PM10)</h3>
    <p> Choose a dataset:</p>
    <div class="slidecontainer">
      <input type="range" min="1" max="2" value="1" class="slider" id="range">
      <p style="text-align:left;"> 14/11/2019  -  19/12/2019 </p>
            <button onclick="setDate()"  id="infoBtn"> Set date! </button>
            <br>
            <br>
            <br>
      <button onclick="introduction(1)" id="infoBtn" > Show Intro </button>

    </div>


</div>
<div id="map">
  <iframe src="https://www.google.com/maps/d/embed?mid=1wKBvzSgLyZSQiVaxqd-n2ABefUzxqcMY" width="100%" height="480px">
    <br>
    B219 54, 48151 Münster, Germany
Head southwest on Weseler Str./B219 toward Kolde-Ring<br>
1.03 km<br>
Turn left onto Sentmaringer Weg<br>
86 m<br>
Turn right onto AlthoffstraßePartial restricted usage road<br>
405 m<br>
Turn right onto Inselbogen<br>
10 m<br>
Turn left to stay on Inselbogen<br>
132 m<br>
Turn left onto Oberschlesier Str.<br>
51 m<br>
Turn right to stay on Oberschlesier Str.<br>
95 m<br>
Turn right onto Gut Insel<br>
67 m<br>
Make a U-turn at Kappenberger Damm<br>
67 m<br>
Turn right onto Oberschlesier Str.<br>
174 m<br>
Turn right to stay on Oberschlesier Str.<br>
107 m<br>
Turn right onto Kappenberger Damm<br>
173 m<br>
Turn right onto Gut Insel<br>
90 m<br>
Turn right onto Oberschlesier Str.<br>
474 m<br>
Turn left onto Kappenberger Damm<br>
124 m<br>
Turn left onto Sudetenweg<br>
219 m<br>
Turn left at Glatzer Weg<br>
87 m<br>
Turn right<br>
269 m<br>
Turn right toward Saarbrücker Str.<br>
19 m<br>
Turn left onto Saarbrücker Str.<br>
151 m<br>
Turn left onto Habichtshöhe<br>
296 m<br>
Turn left onto Gut Insel<br>
376 m<br>
Make a U-turn<br>
376 m<br>
Turn left onto HabichtshöhePartial restricted usage road<br>
242 m<br>
Turn left to stay on HabichtshöheRestricted usage road<br>
64 m<br>
Continue onto Grüner GrundPartial restricted usage road<br>
115 m<br>
Turn left to stay on Grüner GrundRestricted usage road<br>
164 m<br>
Turn right onto Inselbogen<br>
85 m<br>
Turn left onto Oberschlesier Str.<br>
207 m<br>
Turn right onto Gut Insel<br>
90 m<br>
Turn left onto Kappenberger Damm<br>
66 m<br>
Turn right onto Franz-Hitze-Straße<br>
115 m<br>
Turn left onto RüpingstraßePartial restricted usage road<br>
124 m<br>
Turn right onto Eifelstraße<br>
189 m<br>
Turn right to stay on Eifelstraße<br>
80 m<br>
Turn right onto Weseler Str./B219<br>
548 m<br>
Turn right onto Inselbogen<br>
27 m<br>
Turn right onto Kappenberger Damm<br>
316 m<br>
Turn right onto Franz-Hitze-Straße<br>
187 m<br>
Turn right onto Weseler Str./B219Destination will be on the right<br>
1.52 km<br>
<br>
Weseler Str. 93, 48151 Münster, Germany<br>
<br>
    <button onclick="showAndHideMap()" id="infoBtn"> Close </button>
  </iframe>
</div>
</div>

  <div class="information" id="guideAreaInfo" style="visibility: hidden;">
    <div id="guideContent"></div>

    <button onclick="openClosePopup2()" class= "bottom" id="guideBtn" style="min-width: 70px;"> Got it! </button>
  </div>

<div class="introduction">
  <div  id = "introduction-1">
    <p> This is healthy air with less PM10. <br> (5 microgram PM10)</p>
      <button onclick="introduction(2)" class= "bottom" id="introBtn"> Next </button>
  </div>
  <div  id = "introduction-2">
    <p> This is unhealthy air with a lot of PM10.<br>  (40 microgram PM10) </p>
    <button onclick="introduction(3)" class= "bottom" id="introBtn"> Next </button>
  </div>
  <div  id = "introduction-3">
    <p> This is the PM10 value of Muenster in average in 2016 <br> (15 microgram PM10). </p>
    <button onclick="introduction(4)" class= "bottom" id="introBtn"> Next </button>
  </div>
  <div  id = "introduction-4">
    <p> The PM10 value of the next LANUV station is displayed as a circle in the slider on the right.
      The stroke represents the PM10 value for the closest point on the route to your location at the
      chosen time. <br>
      The arrow shows the direction of the route. Following it, you can find guide areas. </p>
      <button onclick="introduction(5)" class= "bottom" id="introBtn"> Next </button>
  </div>
  <div id = "introduction-5">
    <p> To choose between different dates or to see this introduction again click on the question mark in the top-left corner.
      More information about air quality is available on <a href = "../"> this site.</a></p>

    <button onclick="introduction(6)" class= "bottom" id="introBtn"> Close </button>
  </div>
</div>

</body>
</html>

<script src="airQualityGauge.js"></script>
